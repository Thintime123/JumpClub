<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŠŸèƒ½æµ‹è¯• - èº«æ³•ä¿±ä¹éƒ¨</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #1a1a2e;
            color: white;
        }
        .test-section {
            background: rgba(25, 35, 70, 0.6);
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            border: 1px solid rgba(79, 195, 247, 0.3);
        }
        .test-button {
            background: linear-gradient(90deg, #2962ff, #2979ff);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            transform: translateY(-2px);
        }
        .test-result {
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: monospace;
        }
        .success { color: #4caf50; }
        .error { color: #f44336; }
        .warning { color: #ff9800; }
    </style>
</head>
<body>
    <h1>ğŸ§ª èº«æ³•ä¿±ä¹éƒ¨åŠŸèƒ½æµ‹è¯•</h1>
    
    <div class="test-section">
        <h2>ğŸ“Š æ•°æ®æ¨¡å—æµ‹è¯•</h2>
        <button class="test-button" onclick="testDataModule()">æµ‹è¯•æ•°æ®æ¨¡å—</button>
        <div id="dataResult" class="test-result"></div>
    </div>

    <div class="test-section">
        <h2>ğŸ¨ UIæ§åˆ¶å™¨æµ‹è¯•</h2>
        <button class="test-button" onclick="testUIController()">æµ‹è¯•UIæ§åˆ¶å™¨</button>
        <div id="uiResult" class="test-result"></div>
    </div>

    <div class="test-section">
        <h2>ğŸ¯ æ¨¡æ€æ¡†æµ‹è¯•</h2>
        <button class="test-button" onclick="testPlayerModal()">æµ‹è¯•ç©å®¶æ¨¡æ€æ¡†</button>
        <div id="modalResult" class="test-result"></div>
    </div>

    <div class="test-section">
        <h2>â­ è¯„åˆ†ç³»ç»Ÿæµ‹è¯•</h2>
        <button class="test-button" onclick="testRatingSystem()">æµ‹è¯•è¯„åˆ†ç³»ç»Ÿ</button>
        <div id="ratingResult" class="test-result"></div>
    </div>

    <div class="test-section">
        <h2>ğŸ’¬ è¯„è®ºç³»ç»Ÿæµ‹è¯•</h2>
        <button class="test-button" onclick="testCommentSystem()">æµ‹è¯•è¯„è®ºç³»ç»Ÿ</button>
        <div id="commentResult" class="test-result"></div>
    </div>

    <div class="test-section">
        <h2>ğŸš€ å®Œæ•´åº”ç”¨æµ‹è¯•</h2>
        <button class="test-button" onclick="testFullApp()">æµ‹è¯•å®Œæ•´åº”ç”¨</button>
        <button class="test-button" onclick="openMainApp()">æ‰“å¼€ä¸»åº”ç”¨</button>
        <div id="appResult" class="test-result"></div>
    </div>

    <script src="js/data.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/player-modal.js"></script>
    <script src="js/rating-system.js"></script>
    <script src="js/comment-system.js"></script>
    <script src="js/main.js"></script>

    <script>
        function log(elementId, message, type = 'info') {
            const element = document.getElementById(elementId);
            const className = type === 'success' ? 'success' : type === 'error' ? 'error' : type === 'warning' ? 'warning' : '';
            element.innerHTML += `<div class="${className}">[${new Date().toLocaleTimeString()}] ${message}</div>`;
        }

        function clearLog(elementId) {
            document.getElementById(elementId).innerHTML = '';
        }

        function testDataModule() {
            clearLog('dataResult');
            log('dataResult', 'å¼€å§‹æµ‹è¯•æ•°æ®æ¨¡å—...');
            
            try {
                // æµ‹è¯•playersData
                if (typeof playersData !== 'undefined') {
                    log('dataResult', 'âœ… playersData å·²åŠ è½½', 'success');
                    log('dataResult', `- å˜å¼‚soloç©å®¶: ${playersData.variation.length}äºº`);
                    log('dataResult', `- èº²çŒ«çŒ«soloç©å®¶: ${playersData.hideSeek.length}äºº`);
                    log('dataResult', `- æé™è·³è·ƒç©å®¶: ${playersData.extreme.length}äºº`);
                    log('dataResult', `- è·³ç‚¹ç©å®¶: ${playersData.jumpPoints.length}äºº`);
                    log('dataResult', `- è£èª‰æå: ${playersData.honorary.length}äºº`);
                } else {
                    log('dataResult', 'âŒ playersData æœªå®šä¹‰', 'error');
                }

                // æµ‹è¯•playerDetails
                if (typeof playerDetails !== 'undefined') {
                    log('dataResult', 'âœ… playerDetails å·²åŠ è½½', 'success');
                    log('dataResult', `- è¯¦ç»†ä¿¡æ¯äººæ•°: ${Object.keys(playerDetails).length}äºº`);
                } else {
                    log('dataResult', 'âŒ playerDetails æœªå®šä¹‰', 'error');
                }

                log('dataResult', 'âœ… æ•°æ®æ¨¡å—æµ‹è¯•å®Œæˆ', 'success');
            } catch (error) {
                log('dataResult', `âŒ æ•°æ®æ¨¡å—æµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
            }
        }

        function testUIController() {
            clearLog('uiResult');
            log('uiResult', 'å¼€å§‹æµ‹è¯•UIæ§åˆ¶å™¨...');
            
            try {
                if (typeof UIController !== 'undefined') {
                    const ui = new UIController();
                    log('uiResult', 'âœ… UIController ç±»å·²å®šä¹‰', 'success');
                    log('uiResult', 'âœ… UIController å®ä¾‹åˆ›å»ºæˆåŠŸ', 'success');
                } else {
                    log('uiResult', 'âŒ UIController ç±»æœªå®šä¹‰', 'error');
                }
                
                log('uiResult', 'âœ… UIæ§åˆ¶å™¨æµ‹è¯•å®Œæˆ', 'success');
            } catch (error) {
                log('uiResult', `âŒ UIæ§åˆ¶å™¨æµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
            }
        }

        function testPlayerModal() {
            clearLog('modalResult');
            log('modalResult', 'å¼€å§‹æµ‹è¯•ç©å®¶æ¨¡æ€æ¡†...');
            
            try {
                if (typeof PlayerModal !== 'undefined') {
                    log('modalResult', 'âœ… PlayerModal ç±»å·²å®šä¹‰', 'success');
                    // ä¸åˆ›å»ºå®ä¾‹ï¼Œå› ä¸ºéœ€è¦DOMå…ƒç´ 
                    log('modalResult', 'âš ï¸  éœ€è¦å®Œæ•´DOMç¯å¢ƒè¿›è¡Œå®ä¾‹æµ‹è¯•', 'warning');
                } else {
                    log('modalResult', 'âŒ PlayerModal ç±»æœªå®šä¹‰', 'error');
                }
                
                log('modalResult', 'âœ… ç©å®¶æ¨¡æ€æ¡†æµ‹è¯•å®Œæˆ', 'success');
            } catch (error) {
                log('modalResult', `âŒ ç©å®¶æ¨¡æ€æ¡†æµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
            }
        }

        function testRatingSystem() {
            clearLog('ratingResult');
            log('ratingResult', 'å¼€å§‹æµ‹è¯•è¯„åˆ†ç³»ç»Ÿ...');
            
            try {
                if (typeof RatingSystem !== 'undefined') {
                    log('ratingResult', 'âœ… RatingSystem ç±»å·²å®šä¹‰', 'success');
                    log('ratingResult', 'âš ï¸  éœ€è¦å®Œæ•´DOMç¯å¢ƒè¿›è¡Œå®ä¾‹æµ‹è¯•', 'warning');
                } else {
                    log('ratingResult', 'âŒ RatingSystem ç±»æœªå®šä¹‰', 'error');
                }
                
                log('ratingResult', 'âœ… è¯„åˆ†ç³»ç»Ÿæµ‹è¯•å®Œæˆ', 'success');
            } catch (error) {
                log('ratingResult', `âŒ è¯„åˆ†ç³»ç»Ÿæµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
            }
        }

        function testCommentSystem() {
            clearLog('commentResult');
            log('commentResult', 'å¼€å§‹æµ‹è¯•è¯„è®ºç³»ç»Ÿ...');
            
            try {
                if (typeof CommentSystem !== 'undefined') {
                    log('commentResult', 'âœ… CommentSystem ç±»å·²å®šä¹‰', 'success');
                    log('commentResult', 'âš ï¸  éœ€è¦å®Œæ•´DOMç¯å¢ƒè¿›è¡Œå®ä¾‹æµ‹è¯•', 'warning');
                } else {
                    log('commentResult', 'âŒ CommentSystem ç±»æœªå®šä¹‰', 'error');
                }
                
                log('commentResult', 'âœ… è¯„è®ºç³»ç»Ÿæµ‹è¯•å®Œæˆ', 'success');
            } catch (error) {
                log('commentResult', `âŒ è¯„è®ºç³»ç»Ÿæµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
            }
        }

        function testFullApp() {
            clearLog('appResult');
            log('appResult', 'å¼€å§‹æµ‹è¯•å®Œæ•´åº”ç”¨...');
            
            try {
                if (typeof JumpClubApp !== 'undefined') {
                    log('appResult', 'âœ… JumpClubApp ç±»å·²å®šä¹‰', 'success');
                } else {
                    log('appResult', 'âŒ JumpClubApp ç±»æœªå®šä¹‰', 'error');
                }

                if (typeof jumpClubApp !== 'undefined') {
                    log('appResult', 'âœ… jumpClubApp å®ä¾‹å·²åˆ›å»º', 'success');
                    
                    const status = jumpClubApp.getAppStatus();
                    log('appResult', `åº”ç”¨åˆå§‹åŒ–çŠ¶æ€: ${status.initialized ? 'âœ…' : 'âŒ'}`);
                    log('appResult', `æ¨¡å—çŠ¶æ€:`);
                    Object.entries(status.modules).forEach(([name, loaded]) => {
                        log('appResult', `  - ${name}: ${loaded ? 'âœ…' : 'âŒ'}`);
                    });
                } else {
                    log('appResult', 'âŒ jumpClubApp å®ä¾‹æœªåˆ›å»º', 'error');
                }
                
                log('appResult', 'âœ… å®Œæ•´åº”ç”¨æµ‹è¯•å®Œæˆ', 'success');
            } catch (error) {
                log('appResult', `âŒ å®Œæ•´åº”ç”¨æµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
            }
        }

        function openMainApp() {
            window.open('index.html', '_blank');
        }

        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨è¿è¡Œæ‰€æœ‰æµ‹è¯•
        window.addEventListener('load', () => {
            setTimeout(() => {
                testDataModule();
                testUIController();
                testPlayerModal();
                testRatingSystem();
                testCommentSystem();
                testFullApp();
            }, 1000);
        });
    </script>
</body>
</html>
